{"version":3,"sources":["../src/monitorclose.js"],"names":["define","courseURL","closeWindow","checkMessage","e","msg","msgId","JSON","parse","data","MessageId","exc","window","close","location","href","init","opts","courseurl","closewindow","addEventListener"],"mappings":"AAcAA,OAAM,8BAAC,EAAD,CAAK,UAAW,IACdC,CAAAA,CADc,CAEdC,CAFc,CAOlB,QAASC,CAAAA,CAAT,CAAsBC,CAAtB,CAAyB,CACrB,GAAIC,CAAAA,CAAJ,CAASC,CAAT,CACA,GAAI,CACAD,CAAG,CAAGE,IAAI,CAACC,KAAL,CAAWJ,CAAC,CAACK,IAAb,CAAN,CACAH,CAAK,CAAGD,CAAG,CAACK,SACf,CAAC,MAAOC,CAAP,CAAY,CACVL,CAAK,CAAGF,CAAC,CAACK,IACb,CACD,GAAc,UAAV,GAAAH,CAAJ,CAA0B,CACtB,GAAIJ,CAAJ,CAAiB,CACbU,MAAM,CAACC,KAAP,EACH,CAFD,IAEO,CACHD,MAAM,CAACE,QAAP,CAAgBC,IAAhB,CAAuBd,CAC1B,CACJ,CACJ,CAED,MAAO,CACHe,IAAI,CAAE,cAASC,CAAT,CAAe,CACjBhB,CAAS,CAAGgB,CAAI,CAACC,SAAjB,CACAhB,CAAW,CAAGe,CAAI,CAACE,WAAnB,CACAP,MAAM,CAACQ,gBAAP,CAAwB,SAAxB,CAAmCjB,CAAnC,CACH,CALE,CAOV,CA/BK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\ndefine([], function() {\n    var courseURL;\n    var closeWindow;\n\n    /**\n     * @param {Event} e\n     */\n    function checkMessage(e) {\n        var msg, msgId;\n        try {\n            msg = JSON.parse(e.data);\n            msgId = msg.MessageId;\n        } catch (exc) {\n            msgId = e.data;\n        }\n        if (msgId === 'UI_Close') {\n            if (closeWindow) {\n                window.close();\n            } else {\n                window.location.href = courseURL;\n            }\n        }\n    }\n\n    return {\n        init: function(opts) {\n            courseURL = opts.courseurl;\n            closeWindow = opts.closewindow;\n            window.addEventListener('message', checkMessage);\n        }\n    };\n});\n"],"file":"monitorclose.min.js"}